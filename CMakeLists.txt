cmake_minimum_required(VERSION 2.8.12)
project(gason)

add_compile_options(-O3 -std=c++11 -fno-rtti -fno-exceptions -Wall -Wextra)

if(ANDROID)
    set(LIBRARY_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/ruberoid/libs/${ANDROID_ABI})
    include_directories(${ANDROID_NDK}/sources/android/native_app_glue)
    link_libraries(android log)
    add_library(parser-shootout SHARED src/parser-shootout.cpp src/gason.cpp ${ANDROID_NDK}/sources/android/native_app_glue/android_native_app_glue.c)
else()
    add_executable(gasonpp src/gason.cpp src/pretty-print.cpp)
    add_executable(test-suite src/gason.cpp src/test-suite.cpp)
    option(SHOOTOUT "Build parser-shootout" OFF)
    if(SHOOTOUT)
        add_executable(parser-shootout src/parser-shootout.cpp src/gason.cpp)
    endif()
endif()
